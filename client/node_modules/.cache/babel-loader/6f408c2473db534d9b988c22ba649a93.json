{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport cn from \"classnames\";\nimport { useFixedPositioning } from \"@react-md/transition\";\nimport { ABOVE_CENTER_ANCHOR, BELOW_CENTER_ANCHOR, CENTER_LEFT_ANCHOR, CENTER_RIGHT_ANCHOR, unitToNumber, useHoverMode, useOnUnmount, useUserInteractionMode } from \"@react-md/utils\";\nimport { DEFAULT_TOOLTIP_DELAY, DEFAULT_TOOLTIP_DENSE_SPACING, DEFAULT_TOOLTIP_MARGIN, DEFAULT_TOOLTIP_POSITION, DEFAULT_TOOLTIP_SPACING, DEFAULT_TOOLTIP_THRESHOLD, TOOLTIP_SPACING_VAR } from \"./constants\";\nimport { useTooltipPosition } from \"./useTooltipPosition\";\n/** @internal */\n\nfunction getAnchor(position) {\n  switch (position) {\n    case \"above\":\n      return ABOVE_CENTER_ANCHOR;\n\n    case \"below\":\n      return BELOW_CENTER_ANCHOR;\n\n    case \"left\":\n      return CENTER_LEFT_ANCHOR;\n\n    case \"right\":\n      return CENTER_RIGHT_ANCHOR;\n\n    default:\n      throw new Error(\"Invalid position: \" + position);\n  }\n}\n/**\n * This hook is used to handle the positioning and visibility of the tooltip\n * component mostly within the {@link Tooltipped} component.\n *\n * @example\n * Simple Usage\n * ```tsx\n * import { Button } from \"@react-md/button\";\n * import { useTooltip, Tooltip } from \"@react-md/tooltip\";\n *\n * function Example() {\n *   const { tooltipProps, elementProps } = useTooltip({\n *     baseId: 'my-element',\n *   });\n *\n *   return (\n *     <>\n *       <Button {...elementProps}>Button</Button>\n *       <Tooltip {...tooltipProps}>\n *         Tooltip Content\n *       </Tooltip>\n *     </>\n *   );\n * }\n * ```\n *\n * @remarks \\@since 2.8.0\n * @param options - All the {@link TooltipHookOptions} to configure the tooltip behavior.\n * @returns The {@link TooltipHookReturnValue}\n */\n\n\nexport function useTooltip(_a) {\n  var baseId = _a.baseId,\n      style = _a.style,\n      describedBy = _a.describedBy,\n      _b = _a.dense,\n      dense = _b === void 0 ? false : _b,\n      _c = _a.spacing,\n      spacing = _c === void 0 ? DEFAULT_TOOLTIP_SPACING : _c,\n      _d = _a.denseSpacing,\n      denseSpacing = _d === void 0 ? DEFAULT_TOOLTIP_DENSE_SPACING : _d,\n      determinedPosition = _a.position,\n      _e = _a.defaultPosition,\n      defaultPosition = _e === void 0 ? DEFAULT_TOOLTIP_POSITION : _e,\n      _f = _a.vwMargin,\n      vwMargin = _f === void 0 ? DEFAULT_TOOLTIP_MARGIN : _f,\n      _g = _a.vhMargin,\n      vhMargin = _g === void 0 ? DEFAULT_TOOLTIP_MARGIN : _g,\n      _h = _a.threshold,\n      threshold = _h === void 0 ? DEFAULT_TOOLTIP_THRESHOLD : _h,\n      _j = _a.touchTime,\n      touchTime = _j === void 0 ? DEFAULT_TOOLTIP_DELAY : _j,\n      _k = _a.focusTime,\n      focusTime = _k === void 0 ? DEFAULT_TOOLTIP_DELAY : _k,\n      propOnFocus = _a.onFocus,\n      propOnBlur = _a.onBlur,\n      propOnKeyDown = _a.onKeyDown,\n      onClick = _a.onClick,\n      onMouseEnter = _a.onMouseEnter,\n      onMouseLeave = _a.onMouseLeave,\n      propOnTouchStart = _a.onTouchStart,\n      propOnContextMenu = _a.onContextMenu,\n      onEnter = _a.onEnter,\n      onEntering = _a.onEntering,\n      onEntered = _a.onEntered,\n      onExited = _a.onExited,\n      disableSwapping = _a.disableSwapping,\n      disabled = _a.disableHoverMode,\n      _l = _a.disableAutoSpacing,\n      disableAutoSpacing = _l === void 0 ? process.env.NODE_ENV === \"test\" : _l;\n  var containerRef = useRef(null);\n\n  var _m = useTooltipPosition({\n    position: determinedPosition,\n    defaultPosition: defaultPosition,\n    threshold: threshold\n  }),\n      position = _m[0],\n      updatePosition = _m[1];\n\n  var mode = useUserInteractionMode();\n\n  var _o = useState(null),\n      initiatedBy = _o[0],\n      setInitiatedBy = _o[1];\n\n  var windowFocusEvent = useRef(false);\n  var timeout = useRef(undefined);\n\n  var _p = useHoverMode({\n    disabled: disabled,\n    onClick: function (event) {\n      onClick === null || onClick === void 0 ? void 0 : onClick(event);\n\n      if (event.isPropagationStopped()) {\n        return;\n      }\n\n      setVisible(false);\n      setInitiatedBy(null);\n    },\n    onMouseEnter: function (event) {\n      onMouseEnter === null || onMouseEnter === void 0 ? void 0 : onMouseEnter(event);\n\n      if (initiatedBy !== null) {\n        event.stopPropagation();\n        return;\n      }\n\n      containerRef.current = event.currentTarget;\n      updatePosition(event.currentTarget);\n      setInitiatedBy(\"mouse\");\n    },\n    onMouseLeave: function (event) {\n      onMouseLeave === null || onMouseLeave === void 0 ? void 0 : onMouseLeave(event);\n\n      if (initiatedBy !== \"mouse\") {\n        event.stopPropagation();\n        return;\n      }\n\n      setInitiatedBy(null);\n    }\n  }),\n      visible = _p.visible,\n      setVisible = _p.setVisible,\n      mouseHandlers = _p.handlers,\n      disableHoverMode = _p.disableHoverMode,\n      others = __rest(_p, [\"visible\", \"setVisible\", \"handlers\", \"disableHoverMode\"]);\n\n  var hide = useCallback(function () {\n    window.clearTimeout(timeout.current);\n    setVisible(false);\n    setInitiatedBy(null);\n  }, [setVisible]);\n\n  var onBlur = function (event) {\n    propOnBlur === null || propOnBlur === void 0 ? void 0 : propOnBlur(event);\n\n    if (initiatedBy !== \"keyboard\") {\n      return;\n    }\n\n    hide();\n  };\n\n  var onFocus = function (event) {\n    propOnFocus === null || propOnFocus === void 0 ? void 0 : propOnFocus(event); // if the element gained focus immediately after the browser window gains\n    // focus, do not start timer and ignore this event instead\n\n    if (windowFocusEvent.current) {\n      windowFocusEvent.current = false;\n      return;\n    }\n\n    if (mode !== \"keyboard\" || initiatedBy !== null) {\n      return;\n    }\n\n    setInitiatedBy(\"keyboard\");\n    window.clearTimeout(timeout.current);\n    containerRef.current = event.currentTarget;\n    updatePosition(event.currentTarget);\n    timeout.current = window.setTimeout(function () {\n      setVisible(true);\n    }, focusTime);\n  };\n\n  var onKeyDown = function (event) {\n    propOnKeyDown === null || propOnKeyDown === void 0 ? void 0 : propOnKeyDown(event);\n\n    if (initiatedBy !== \"keyboard\" || event.key !== \"Escape\") {\n      return;\n    }\n\n    hide();\n  };\n\n  var onTouchStart = function (event) {\n    propOnTouchStart === null || propOnTouchStart === void 0 ? void 0 : propOnTouchStart(event);\n\n    if (event.isPropagationStopped() || mode !== \"touch\") {\n      return;\n    }\n\n    setInitiatedBy(\"touch\");\n    window.clearTimeout(timeout.current);\n    timeout.current = window.setTimeout(function () {\n      setVisible(true);\n    }, touchTime);\n    containerRef.current = event.currentTarget;\n    updatePosition(event.currentTarget);\n  };\n\n  var onContextMenu = function (event) {\n    var _a;\n\n    propOnContextMenu === null || propOnContextMenu === void 0 ? void 0 : propOnContextMenu(event);\n\n    if (event.isPropagationStopped() || mode !== \"touch\") {\n      return;\n    } // Need to prevent the context menu from displaying and display the tooltip\n    // instead.\n\n\n    event.preventDefault();\n    var selection = window.getSelection();\n    var node = (_a = selection === null || selection === void 0 ? void 0 : selection.anchorNode) === null || _a === void 0 ? void 0 : _a.parentElement;\n    /* istanbul ignore next */\n\n    if (selection && node && event.currentTarget.contains(node)) {\n      selection.empty();\n    }\n\n    setVisible(true);\n  };\n\n  useEffect(function () {\n    if (mode !== \"keyboard\") {\n      windowFocusEvent.current = false;\n      return;\n    }\n\n    var handler = function () {\n      if (document.hidden) {\n        hide();\n        windowFocusEvent.current = document.activeElement === containerRef.current;\n      }\n    };\n\n    window.addEventListener(\"visibilitychange\", handler);\n    return function () {\n      window.removeEventListener(\"visibilitychange\", handler);\n    };\n  }, [hide, mode]);\n  useEffect(function () {\n    if (initiatedBy !== \"touch\") {\n      return;\n    }\n\n    window.addEventListener(\"touchmove\", hide, true);\n    window.addEventListener(\"touchend\", hide, true);\n    return function () {\n      window.removeEventListener(\"touchmove\", hide, true);\n      window.removeEventListener(\"touchend\", hide, true);\n    };\n  }, [hide, initiatedBy, setVisible]);\n  useOnUnmount(function () {\n    window.clearTimeout(timeout.current);\n  });\n\n  var _q = useFixedPositioning({\n    style: style,\n    anchor: getAnchor(position),\n    disableSwapping: disableSwapping !== null && disableSwapping !== void 0 ? disableSwapping : !!determinedPosition,\n    fixedTo: containerRef,\n    getOptions: function (node) {\n      var tooltipSpacing = dense ? denseSpacing : spacing;\n      /* istanbul ignore next */\n\n      if (!disableAutoSpacing) {\n        tooltipSpacing = window.getComputedStyle(node).getPropertyValue(TOOLTIP_SPACING_VAR);\n      }\n\n      var currentSpacing = unitToNumber(tooltipSpacing);\n      return {\n        vwMargin: vwMargin,\n        vhMargin: vhMargin,\n        xMargin: currentSpacing,\n        yMargin: currentSpacing\n      };\n    },\n    onResize: hide,\n    onScroll: hide,\n    onEnter: onEnter,\n    onEntering: onEntering,\n    onEntered: onEntered,\n    onExited: onExited\n  }),\n      _u = _q.updateStyle,\n      positionProps = __rest(_q, [\"updateStyle\"]);\n\n  var tooltipHandlers = __assign(__assign({}, mouseHandlers), {\n    onFocus: onFocus,\n    onBlur: onBlur,\n    onKeyDown: onKeyDown,\n    onTouchStart: onTouchStart,\n    onContextMenu: onContextMenu\n  });\n\n  var tooltipId = baseId + \"-tooltip\";\n\n  var elementProps = __assign({\n    id: baseId,\n    \"aria-describedby\": cn(visible && tooltipId, describedBy) || undefined\n  }, tooltipHandlers);\n\n  var tooltipProps = __assign({\n    id: tooltipId,\n    dense: dense,\n    visible: visible,\n    position: position\n  }, positionProps);\n\n  return __assign(__assign({}, others), {\n    visible: visible,\n    setVisible: setVisible,\n    handlers: tooltipHandlers,\n    elementProps: elementProps,\n    tooltipProps: tooltipProps,\n    disableHoverMode: disableHoverMode\n  });\n}","map":{"version":3,"sources":["../src/useTooltip.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { useCallback, useEffect, useRef, useState, } from \"react\";\nimport cn from \"classnames\";\nimport { useFixedPositioning } from \"@react-md/transition\";\nimport { ABOVE_CENTER_ANCHOR, BELOW_CENTER_ANCHOR, CENTER_LEFT_ANCHOR, CENTER_RIGHT_ANCHOR, unitToNumber, useHoverMode, useOnUnmount, useUserInteractionMode, } from \"@react-md/utils\";\nimport { DEFAULT_TOOLTIP_DELAY, DEFAULT_TOOLTIP_DENSE_SPACING, DEFAULT_TOOLTIP_MARGIN, DEFAULT_TOOLTIP_POSITION, DEFAULT_TOOLTIP_SPACING, DEFAULT_TOOLTIP_THRESHOLD, TOOLTIP_SPACING_VAR, } from \"./constants\";\nimport { useTooltipPosition, } from \"./useTooltipPosition\";\n/** @internal */\nfunction getAnchor(position) {\n    switch (position) {\n        case \"above\":\n            return ABOVE_CENTER_ANCHOR;\n        case \"below\":\n            return BELOW_CENTER_ANCHOR;\n        case \"left\":\n            return CENTER_LEFT_ANCHOR;\n        case \"right\":\n            return CENTER_RIGHT_ANCHOR;\n        default:\n            throw new Error(\"Invalid position: \" + position);\n    }\n}\n/**\n * This hook is used to handle the positioning and visibility of the tooltip\n * component mostly within the {@link Tooltipped} component.\n *\n * @example\n * Simple Usage\n * ```tsx\n * import { Button } from \"@react-md/button\";\n * import { useTooltip, Tooltip } from \"@react-md/tooltip\";\n *\n * function Example() {\n *   const { tooltipProps, elementProps } = useTooltip({\n *     baseId: 'my-element',\n *   });\n *\n *   return (\n *     <>\n *       <Button {...elementProps}>Button</Button>\n *       <Tooltip {...tooltipProps}>\n *         Tooltip Content\n *       </Tooltip>\n *     </>\n *   );\n * }\n * ```\n *\n * @remarks \\@since 2.8.0\n * @param options - All the {@link TooltipHookOptions} to configure the tooltip behavior.\n * @returns The {@link TooltipHookReturnValue}\n */\nexport function useTooltip(_a) {\n    var baseId = _a.baseId, style = _a.style, describedBy = _a.describedBy, _b = _a.dense, dense = _b === void 0 ? false : _b, _c = _a.spacing, spacing = _c === void 0 ? DEFAULT_TOOLTIP_SPACING : _c, _d = _a.denseSpacing, denseSpacing = _d === void 0 ? DEFAULT_TOOLTIP_DENSE_SPACING : _d, determinedPosition = _a.position, _e = _a.defaultPosition, defaultPosition = _e === void 0 ? DEFAULT_TOOLTIP_POSITION : _e, _f = _a.vwMargin, vwMargin = _f === void 0 ? DEFAULT_TOOLTIP_MARGIN : _f, _g = _a.vhMargin, vhMargin = _g === void 0 ? DEFAULT_TOOLTIP_MARGIN : _g, _h = _a.threshold, threshold = _h === void 0 ? DEFAULT_TOOLTIP_THRESHOLD : _h, _j = _a.touchTime, touchTime = _j === void 0 ? DEFAULT_TOOLTIP_DELAY : _j, _k = _a.focusTime, focusTime = _k === void 0 ? DEFAULT_TOOLTIP_DELAY : _k, propOnFocus = _a.onFocus, propOnBlur = _a.onBlur, propOnKeyDown = _a.onKeyDown, onClick = _a.onClick, onMouseEnter = _a.onMouseEnter, onMouseLeave = _a.onMouseLeave, propOnTouchStart = _a.onTouchStart, propOnContextMenu = _a.onContextMenu, onEnter = _a.onEnter, onEntering = _a.onEntering, onEntered = _a.onEntered, onExited = _a.onExited, disableSwapping = _a.disableSwapping, disabled = _a.disableHoverMode, _l = _a.disableAutoSpacing, disableAutoSpacing = _l === void 0 ? process.env.NODE_ENV === \"test\" : _l;\n    var containerRef = useRef(null);\n    var _m = useTooltipPosition({\n        position: determinedPosition,\n        defaultPosition: defaultPosition,\n        threshold: threshold,\n    }), position = _m[0], updatePosition = _m[1];\n    var mode = useUserInteractionMode();\n    var _o = useState(null), initiatedBy = _o[0], setInitiatedBy = _o[1];\n    var windowFocusEvent = useRef(false);\n    var timeout = useRef(undefined);\n    var _p = useHoverMode({\n        disabled: disabled,\n        onClick: function (event) {\n            onClick === null || onClick === void 0 ? void 0 : onClick(event);\n            if (event.isPropagationStopped()) {\n                return;\n            }\n            setVisible(false);\n            setInitiatedBy(null);\n        },\n        onMouseEnter: function (event) {\n            onMouseEnter === null || onMouseEnter === void 0 ? void 0 : onMouseEnter(event);\n            if (initiatedBy !== null) {\n                event.stopPropagation();\n                return;\n            }\n            containerRef.current = event.currentTarget;\n            updatePosition(event.currentTarget);\n            setInitiatedBy(\"mouse\");\n        },\n        onMouseLeave: function (event) {\n            onMouseLeave === null || onMouseLeave === void 0 ? void 0 : onMouseLeave(event);\n            if (initiatedBy !== \"mouse\") {\n                event.stopPropagation();\n                return;\n            }\n            setInitiatedBy(null);\n        },\n    }), visible = _p.visible, setVisible = _p.setVisible, mouseHandlers = _p.handlers, disableHoverMode = _p.disableHoverMode, others = __rest(_p, [\"visible\", \"setVisible\", \"handlers\", \"disableHoverMode\"]);\n    var hide = useCallback(function () {\n        window.clearTimeout(timeout.current);\n        setVisible(false);\n        setInitiatedBy(null);\n    }, [setVisible]);\n    var onBlur = function (event) {\n        propOnBlur === null || propOnBlur === void 0 ? void 0 : propOnBlur(event);\n        if (initiatedBy !== \"keyboard\") {\n            return;\n        }\n        hide();\n    };\n    var onFocus = function (event) {\n        propOnFocus === null || propOnFocus === void 0 ? void 0 : propOnFocus(event);\n        // if the element gained focus immediately after the browser window gains\n        // focus, do not start timer and ignore this event instead\n        if (windowFocusEvent.current) {\n            windowFocusEvent.current = false;\n            return;\n        }\n        if (mode !== \"keyboard\" || initiatedBy !== null) {\n            return;\n        }\n        setInitiatedBy(\"keyboard\");\n        window.clearTimeout(timeout.current);\n        containerRef.current = event.currentTarget;\n        updatePosition(event.currentTarget);\n        timeout.current = window.setTimeout(function () {\n            setVisible(true);\n        }, focusTime);\n    };\n    var onKeyDown = function (event) {\n        propOnKeyDown === null || propOnKeyDown === void 0 ? void 0 : propOnKeyDown(event);\n        if (initiatedBy !== \"keyboard\" || event.key !== \"Escape\") {\n            return;\n        }\n        hide();\n    };\n    var onTouchStart = function (event) {\n        propOnTouchStart === null || propOnTouchStart === void 0 ? void 0 : propOnTouchStart(event);\n        if (event.isPropagationStopped() || mode !== \"touch\") {\n            return;\n        }\n        setInitiatedBy(\"touch\");\n        window.clearTimeout(timeout.current);\n        timeout.current = window.setTimeout(function () {\n            setVisible(true);\n        }, touchTime);\n        containerRef.current = event.currentTarget;\n        updatePosition(event.currentTarget);\n    };\n    var onContextMenu = function (event) {\n        var _a;\n        propOnContextMenu === null || propOnContextMenu === void 0 ? void 0 : propOnContextMenu(event);\n        if (event.isPropagationStopped() || mode !== \"touch\") {\n            return;\n        }\n        // Need to prevent the context menu from displaying and display the tooltip\n        // instead.\n        event.preventDefault();\n        var selection = window.getSelection();\n        var node = (_a = selection === null || selection === void 0 ? void 0 : selection.anchorNode) === null || _a === void 0 ? void 0 : _a.parentElement;\n        /* istanbul ignore next */\n        if (selection && node && event.currentTarget.contains(node)) {\n            selection.empty();\n        }\n        setVisible(true);\n    };\n    useEffect(function () {\n        if (mode !== \"keyboard\") {\n            windowFocusEvent.current = false;\n            return;\n        }\n        var handler = function () {\n            if (document.hidden) {\n                hide();\n                windowFocusEvent.current =\n                    document.activeElement === containerRef.current;\n            }\n        };\n        window.addEventListener(\"visibilitychange\", handler);\n        return function () {\n            window.removeEventListener(\"visibilitychange\", handler);\n        };\n    }, [hide, mode]);\n    useEffect(function () {\n        if (initiatedBy !== \"touch\") {\n            return;\n        }\n        window.addEventListener(\"touchmove\", hide, true);\n        window.addEventListener(\"touchend\", hide, true);\n        return function () {\n            window.removeEventListener(\"touchmove\", hide, true);\n            window.removeEventListener(\"touchend\", hide, true);\n        };\n    }, [hide, initiatedBy, setVisible]);\n    useOnUnmount(function () {\n        window.clearTimeout(timeout.current);\n    });\n    var _q = useFixedPositioning({\n        style: style,\n        anchor: getAnchor(position),\n        disableSwapping: disableSwapping !== null && disableSwapping !== void 0 ? disableSwapping : !!determinedPosition,\n        fixedTo: containerRef,\n        getOptions: function (node) {\n            var tooltipSpacing = dense ? denseSpacing : spacing;\n            /* istanbul ignore next */\n            if (!disableAutoSpacing) {\n                tooltipSpacing = window\n                    .getComputedStyle(node)\n                    .getPropertyValue(TOOLTIP_SPACING_VAR);\n            }\n            var currentSpacing = unitToNumber(tooltipSpacing);\n            return {\n                vwMargin: vwMargin,\n                vhMargin: vhMargin,\n                xMargin: currentSpacing,\n                yMargin: currentSpacing,\n            };\n        },\n        onResize: hide,\n        onScroll: hide,\n        onEnter: onEnter,\n        onEntering: onEntering,\n        onEntered: onEntered,\n        onExited: onExited,\n    }), _u = _q.updateStyle, positionProps = __rest(_q, [\"updateStyle\"]);\n    var tooltipHandlers = __assign(__assign({}, mouseHandlers), { onFocus: onFocus,\n        onBlur: onBlur,\n        onKeyDown: onKeyDown,\n        onTouchStart: onTouchStart,\n        onContextMenu: onContextMenu });\n    var tooltipId = baseId + \"-tooltip\";\n    var elementProps = __assign({ id: baseId, \"aria-describedby\": cn(visible && tooltipId, describedBy) || undefined }, tooltipHandlers);\n    var tooltipProps = __assign({ id: tooltipId, dense: dense,\n        visible: visible,\n        position: position }, positionProps);\n    return __assign(__assign({}, others), { visible: visible,\n        setVisible: setVisible, handlers: tooltipHandlers, elementProps: elementProps,\n        tooltipProps: tooltipProps,\n        disableHoverMode: disableHoverMode });\n}\n//# sourceMappingURL=useTooltip.js.map"]},"metadata":{},"sourceType":"module"}